const url="https://mwnation.com/wp-json/wp/v2/posts?per_page=20";const data=[];const db=localStorage.getItem("id")||387862;async function getData(){const response=await fetch(url);const result=await response.json();data.push(result);result.forEach((news=>{}));generateNewsCards(result)}const categoryMap={24:"National News",25:"Front Page",27:"National Sports",28:"Business News"};function timeAgo(dateString){const now=new Date;const articleDate=new Date(dateString);const diffMs=now-articleDate;const diffHours=Math.floor(diffMs/(1e3*60*60));if(diffHours<1)return"Just now";if(diffHours<24)return`${diffHours} hour${diffHours>1?"s":""} ago`;const diffDays=Math.floor(diffHours/24);return`${diffDays} day${diffDays>1?"s":""} ago`}function stripHtml(html){const div=document.createElement("div");div.innerHTML=html;return div.textContent||div.innerText||""}function generateNewsCards(articles){const newsContainer=document.getElementById("news");newsContainer.innerHTML="";articles.forEach((article=>{const title=article.title.rendered;const newsId=article.id;const excerpt=stripHtml(article.excerpt.rendered).substring(0,100)+"...";const link=article.link;const image=article.yoast_head_json?.og_image?.[0]?.url||"https://via.placeholder.com/300x200";const time=timeAgo(article.date);const category=article.categories.map((id=>categoryMap[id]||"News")).join(", ");const card=document.createElement("div");card.className="col";card.innerHTML=`\n            <div class="card news-card h-100 mb-1">\n                <img src="${image}" class="card-img-top" alt="${title}">\n                <div class="card-body">\n                    <h5 class="card-title">${title}</h5>\n                    <p class="card-text">${excerpt}</p>\n                    <button class="btn btn-outline-primary read-more-btn" data-id="${newsId}">\n                        <i class="bi bi-eye me-2"></i>Read More\n                    </button>\n                </div>\n                <div class="card-footer text-muted">\n                    <small><i class="bi bi-clock me-2"></i>${time} | ${category}</small>\n                </div>\n            </div>\n        `;newsContainer.appendChild(card)}));setTimeout((()=>{document.querySelectorAll(".read-more-btn").forEach((button=>{button.addEventListener("click",(function(){const newsId=this.getAttribute("data-id");readNews(newsId)}))}))}),0)}function readNews(newsId){if(!newsId){console.error("No news ID found!");return}localStorage.setItem("id",newsId);console.log("Reading news with ID:",newsId);window.location.href=`story.html`}document.addEventListener("DOMContentLoaded",getData);